{% for bm in bms %}
{%if bm.trashed%}
<div class="alert alert-error row-{{ bm.id }}">
{%elif bm.starred%}
<div class="alert alert-success row-{{ bm.id }} ">
{%else%}
<div class="well well-small row-{{ bm.id }}">
{%endif%}
  <dt > <i class="icon-bookmark hidden-phone"></i>
    <a href="{{ bm.url }}" target="_blank">{{ bm.title|e|truncate(80) }}</a>
    <div class="btn-group hidden-phone">
      <a class="btn btn-link btn-mini" onclick="getbms('domain','','{{ bm.domain }}')"><em>[{{ bm.domain }}]</em></a>
    </div>
    <dd>
      <div class="btn-toolbar">
        <button class="btn btn-small" onclick="trash({{ bm.id }})">
          {% if bm.trashed %}
          <i class="icon-remove hidden-phone"></i><span>delete</span>
          {% else %}
          <i class="icon-trash hidden-phone"></i><span>trash</span>
          {% endif %}
        </button>
        <button class="btn btn-small" onclick="archive({{ bm.id }})">
          {% if bm.archived or bm.trashed %}
          <i class="icon-inbox hidden-phone"></i><span>inbox</span>
          {% else %}
          <i class="icon-folder-close hidden-phone"></i><span>archive</span>
          {% endif %}
        </button>
        <div class="btn-group hidden-phone">
          <button class="btn btn-small" onclick="comment({{ bm.id }})">
            <i class="icon-comment"></i><span>comment</span></button>

          <button class="btn btn-small" onclick="edit({{ bm.id }})">
            <i class="icon-edit"></i><span>edit</span></button>
        </div>
        <div class="btn-group hidden-phone">
          <button class="btn btn-small star-{{ bm.id }}" onclick="star({{ bm.id }})">
            {% if bm.starred %} <i class="icon-star"></i> {% else %} <i class="icon-star-empty"></i> {% endif %}
          </button>
          <button class="btn btn-small share-{{ bm.id }}" onclick="share({{ bm.id }})">
            {% if bm.shared %} <i class="icon-eye-open"></i> {% else %} <i class="icon-eye-close"></i> {% endif %}
          </button>
        </div>
<!--         <div class="btn-group">
          <a class="btn btn-small" onclick="email({{ bm.id }})">email</a>
        </div> -->
        <div class="btn-group">
          <a class="btn btn-small" onclick="tweet({{ bm.id }})">tweet</a>
        </div>
        <div class="btn-group link-{{ bm.id }}">
          {% if bm.shared %}
          <a class="btn btn-small btn-link " href="/bm/{{ bm.id }}" target="_blank">link</a>
          {% endif %}
        </div>
      </div><!-- btn-toolbar -->
    <dd class="hide tweet-{{ bm.id }}">
      <form class="form-inline" action="/twitter/tweet">
        <div class="control-group" id="input_tweet-{{ bm.id }}">
          <textarea name="text_tweet" id="text_tweet-{{ bm.id }}" rows="3" class="span10">{{bm.title}} {{bm.url}}</textarea>
          <button class="btn btn-large " type="submit" >tweet</button>
        </div>
        <script type="text/javascript">
        $('#text_tweet-{{ bm.id }}').keyup(function() {
          var len = this.value.length - {{bm.url|length}} + 25;
          if (len >= 140) {
            $('#input_tweet-{{ bm.id }}').removeClass('success');
            $('#input_tweet-{{ bm.id }}').addClass('error');
          } else {
            $('#input_tweet-{{ bm.id }}').addClass('success');
          }
        });
        </script>
      </form>
    <dd class="comments comment-{{ bm.id }}">
      <div>
        {{bm.comment}}
        <script type="text/javascript">
          $('.comment-{{ bm.id }} a').attr('target', '_blank');
        </script>
      </div>

    <dd class="hide edit-{{ bm.id }}">{% include 'edit.html'%}
  </dt>
</div><!-- btn-toolbar -->
{% endfor %}
{% if cursor %}
<div class="well well-small">
<a href="#" class="btn btn-block" onclick="getbms(active(),'{{cursor}}')">more</a>
</div>
{% endif %}
