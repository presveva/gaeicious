{% for bm in bms %}
<div class="row-{{ bm.id }}">
  <table class="table table-condensed table-striped"> <tbody>
    <tr> <td>
      <button class="btn btn-small" onclick="trash({{ bm.id }})">
        {% if bm.trashed %} <span>delete</span> {% else %} <span>trash</span> {% endif %}
      </button>
      <button class="btn btn-small" onclick="archive({{ bm.id }})">
        {% if bm.archived or bm.trashed %} <span>inbox</span> {% else %} <span>archive</span> {% endif %}
      </button>
      <button class="btn btn-small" onclick="comment({{ bm.id }})">
        <span>comment</span>
      </button>
      <button class="btn btn-small hidden-phone" onclick="edit({{ bm.id }})">
        <span>edit</span>
      </button>
      <button class="btn hidden-phone btn-small star-{{ bm.id }}" onclick="star({{ bm.id }})">
        {% if bm.starred %} <i class="icon-star"></i> {% else %} <i class="icon-star-empty"></i> {% endif %}
      </button>
      <button class="btn hidden-phone btn-small share-{{ bm.id }}" onclick="share({{ bm.id }})">
        {% if bm.shared %} <i class="icon-eye-open"></i> {% else %} <i class="icon-eye-close"></i> {% endif %}
      </button>
      <button class="btn btn-small" onclick="tweet({{ bm.id }})">tweet</button>
      <div class="link-{{ bm.id }} btn-group">
      {% if bm.shared %}
      <a class="btn btn-small btn-link " href="/bm/{{ bm.id }}" target="_blank">link</a>
      {% endif %}
      </div>
      <a class="btn btn-link btn-mini hidden-phone pull-right" onclick="getbms('domain','','{{ bm.domain }}')">
        <em>{{ bm.domain }}</em>
      </a>
    </td> </tr>
    <tr class="{%if bm.trashed%}error{%elif bm.starred%}success{%endif%}"> <td>
      <i class="icon-bookmark hidden-phone"></i>
      <a href="{{ bm.url }}" target="_blank">{{ bm.title|e}}</a>
    </td> </tr>
    <tr class="hide tweet-{{ bm.id }}"> <td>
      <form class="form-inline" action="/twitter/tweet">
        <div class="control-group" id="input_tweet-{{ bm.id }}">
          <textarea name="text_tweet" id="text_tweet-{{ bm.id }}" rows="3" class="span10">{{bm.title}} {{bm.url}}</textarea>
          <button class="btn btn-large " type="submit" >tweet</button>
        </div>
        <script type="text/javascript">
        // $("[id='text_tweet-" + {{ bm.id|e }} + "']").keyup(function() {
        $('#text_tweet-{{ bm.id }}').keyup(function() {
          var len = this.value.length - {{bm.url|length}} + 25;
          if (len >= 140) {
            $('#input_tweet-{{ bm.id }}').removeClass('success');
            $('#input_tweet-{{ bm.id }}').addClass('error');
          } else {
            $('#input_tweet-{{ bm.id }}').addClass('success');
          }
        });
        </script>
      </form>
    </td> </tr>
    <tr class="hide edit-{{ bm.id }}"> <td>
      {% include 'edit.html'%}
    </td> </tr>
    <tr class="comments comment-{{ bm.id }} "> <td>
      {{bm.comment}}
      <script type="text/javascript">
        $('.comment-{{ bm.id }} a').attr('target', '_blank');
      </script>
    </td> </tr>
  </tbody> </table>
</div>
<!-- <hr class="row-{{ bm.id }}"> -->
{% endfor %}
{% if cursor %}
<div class="well well-small">
<a href="#" class="btn btn-block" onclick="getbms(active(),'{{cursor}}')">more</a>
</div>
{% endif %}
